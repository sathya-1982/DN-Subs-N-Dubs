<script>
const original = document.getElementById("original");
const dubbed = document.getElementById("dubbed");
const origPlayer = document.getElementById("originalPlayer");
const dubPlayer = document.getElementById("dubbedPlayer");

// Load original video
original.onchange = () => {
    const file = original.files[0];
    if (file) {
        origPlayer.src = URL.createObjectURL(file);
        origPlayer.load();
    }
};

// Load dubbed video
dubbed.onchange = () => {
    const file = dubbed.files[0];
    if (file) {
        dubPlayer.src = URL.createObjectURL(file);
        dubPlayer.load();
    }
};

function playBoth() {
    // browsers block unmuted autoplay â€” mute first, then unmute after play
    origPlayer.muted = true;
    dubPlayer.muted = true;

    origPlayer.play().then(() => {
        dubPlayer.play().then(() => {
            // after playing, unmute based on user choice
        });
    }).catch(err => console.log("Autoplay blocked:", err));
}

function pauseBoth() {
    origPlayer.pause();
    dubPlayer.pause();
}

function originalOnly() {
    origPlayer.muted = false;
    dubPlayer.muted = true;
    if (origPlayer.paused) origPlayer.play();
}

function dubbedOnly() {
    origPlayer.muted = true;
    dubPlayer.muted = false;
    if (dubPlayer.paused) dubPlayer.play();
}

function bothAudio() {
    origPlayer.muted = false;
    dubPlayer.muted = false;
}
</script>
